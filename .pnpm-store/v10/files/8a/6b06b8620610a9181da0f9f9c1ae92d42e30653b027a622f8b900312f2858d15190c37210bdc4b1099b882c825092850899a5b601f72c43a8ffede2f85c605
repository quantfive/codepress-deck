let tokenValue = null;
let tokenProvider = null;
export function setToken(token) {
    tokenValue = token ?? null;
}
export function setTokenProvider(provider) {
    tokenProvider = provider;
}
export async function getProvidedToken() {
    try {
        if (typeof tokenProvider === "function") {
            const v = await tokenProvider();
            if (v)
                return v;
        }
    }
    catch (e) {
        // ignore provider errors and fall back to stored token
    }
    return tokenValue;
}
